# Chapter07 문자열 검색 - 01 브루트 - 포스법

## 문자열 검색이란?
- 문자열 검색이란 어떤 문자열 안에 특정 문자열이 들어있는지 조사하고, 들어있다면 그 위치를 찾는 것을 말함
- 지금부터는 이해하기 쉽게 검색할 문자열을 패턴(pattern)이라 하고 문자열 원본을 텍스트(text)라고 하겠다.

<br>

---

<br>

## 브루트 - 포스법 알아보기
- 텍스트 "ABABCDEFGHA"에서 패턴 "ABC"를 부르트 - 포스법(brute force method)을 사용해 검색하는 과정
  [a] 텍스트의 첫문자 'A'부터 시작하는 3개의 문자와 "ABC"가 일치하는지 검사, 'A'와 'B'는 일치하지만 'C'는 다름
  [b] 패턴을 1칸 뒤로 옮김, 텍스트의 2번째 문자부터 3개의 문자가 일치하는지 조사, 'A'와 'B'가 다름
  [c] 패턴을 다시 1칸 뒤로 옮김, 'A', 'B', 'C' 모두 일치하므로 검색 성공
- 브루트 - 포스법은 선형 검색을 확장한 단순한 알고리즘이므로 단순법, 소박법이라고도 함
- 첫 번째 검사에서 검사 위치가 2까지 앞으로 나아갔는데 2번째 검사에서 다시 1부터 검사함
  - 즉, 이미 검사한 위치에서 뒤로 물러나므로 브루트 - 포스법은 효율이 좋지 않다.
- BFmatch
  - bfMatch 메서드는 텍스트(txt)에서 패턴(pat)을 검색하여 검색에 성공하면 그 위치의 텍스트 쪽 인덱스를 반환
  - 텍스트에 패턴이 여러 개 있으면 가장 앞쪽에 위치한 텍스트 쪽 인덱스를 반환하고, 검색에 실패하면 -1을 반환
  - 텍스트를 스캠하기 위한 변수로 pt를 사용하고, 패턴을 스캔하기위한 변수로 pp를 사용
  - 두 변수를 처음에 0으로 초기화 하고, 스캔하거나 패턴을 옮길 때마다 업데이트

<br>

### 보충수업 7-1 문자열과 String 클래스
- java에서 문자열은 java.lang 패키지에 소속된 String 클래스로 나타냄
- String 클래스형 변수의 전형적인 선언은 다음과 같다.
  ```
  String s = "ABC";
  ```
  - 초기자로 주어진 "ABC"는 문자열 리터럴
  - 문자열 리터럴은 단순히 문자가 들어서 있는 것이 아니라 String형 인스턴스
  - String 클래스는 문자열을 넣어 두기 위한 '문자 배열'을 비공개 필드로 갖고 있음
- 문자열 길이를 구하는 메서드 length
  - length 메서드는 문자열 길이(문자열에 포함되어 있는 문자 수)를 조사하며, 다음 형식으로 호출
    ```
    변수 이름.length()
    ```
  - 이 메서드는 문자열의 길이를 int형으로 반환
  - 배열의 요솟수를 구하는 식인 '배열 이름.length'와는 전혀 다름
- 문자열 안에서 특정 문자를 꺼내는 메서드 charAt
  - charAt 메서드는 문자열 안에서 특정 위치에 있는 문자를 가져옴
  - 인덱스가 i인 문자를 다음 형식으로 가져올 수 있다.
    ```
    변수 이름.charAt(i)
    ```
  - 반환하는 문자의 형은 char형
- 부분 문자열을 꺼내는 메서드 substring
  - substring 메서드는 문자열에서 부분 문자열을 꺼냄
  - 전달 받은 인수가 1개인 것과 2개인 것을 다중으로 정의(오버로드)
    ```
    변수 이름.substring(begin)
    변수 이름.substring(begin, end)
    ```
    - 첫 번째 메서드가 반환하는 것은 인덱스가 begin인 문자부터 맨 끝까지의 문자열
    - 두 번째 메서드가 반환하는 것은 인덱스가 begin인 문자부터 end 바로 앞까지의 문자열
    - 두 메서드 모두 새로 생성한 문자열 인스턴스를 반환
- 다른 문자열과 내용잉 같은지 조사하는 메서드 equals
  - 2개의 문자열을 등가 연산자(== 또는 !=)로 비교하는 경우 등가성을 판단하는 대상은 문자열의 내용이 아니라 참조하는 곳(인스터스를 넣어 둔 곳)
  - 문자열 안에 있는 내용의 등가성을 판단하는 것이 equals 메서드
  - equals 메서드는 다음 형식으로 호출
    ```
    변수 이름.equals(s)
    ```
    - 문자열 s와 같으면 true를, 갖지 않으면 false를 반환
  - 이 메서드는 Object 클래스의 equals 메서드를 다중 정의
- 다른 문자열과 비교(대소 관계 판단)하는 메서드 compareTo
  - compareTo 메서드는 인수로 전달받은 문자열과 비교(대소 관계를 판단)
    ```
    변수 이름.compareTo(s)
    ```
  - 문자열 s의 대소 관계를 '사전의 순서'에 따라 판단하고 다음처럼 값을 반환
    ```
    - 문자열이 s보다 작으면 음의 정수값
    - 문자열이 s보다 크면 양의 정수값
    - 문자열이 s와 같으면 0
    ```
    
<br>

---

<br>

## String.indexOf 메서드로 문자열 검색하기
- java.lang.String 클래스는 문자열을 검색하는 indexOf의 메서드와 lastIndexOf 메서드를 제공
  [1] int indexOf(String str)
  [2] int indexOf(String str, int fromIndex)
  [3] int lastIndexOf(String str)
  [4] int lastIndexOf(String str, int fromIndex)
- 위의 메서드는 모두 지정한 특정 문자열(str)이 포함되어 있는지 검색
- 검색에 성공하면 찾은 문자열(텍스트)의 인덱스를 반환, 실패하면 -1을 반환
- (1), (3)은 전체 문자열을 검색, (2), (4)는 fromIndex 부터의 문자열을 검색
- 이때 (3), (4)는 같은 문자열에 대해 가장 뒤쪽에 위치한 문자열을 검색

<br>

### 조금만 더! 부호화는 무엇일까요?
- 부호화, 즉 인코딩(encoding)은 정보의 모양이나 형식으로 변환하는 것
- 부호화는 표준화, 보안, 처리속도 향상, 저장 공간 절약 등을 위해 사용
- 문자열(str)은 사람이 인지하고 처리할 수 있는 문자 형식
- 반면 바이트 시퀀스(bytes sequence, 바이트열)는 기계가 처리하는 문자 형식으로 문자를 표현하는 실제 바이트
- 따라서 부호화, 즉 인코딩은 문자열을 바이트 시퀀스로 변환하는 것
- 디코딩(decoding)은 인코딩과 반대로 바이트 시퀀스를 문자열로 반환하는 것

<br>

- IndexOfTester
  - 반각, 곧 1바이트인 공백 문자 -> '*'는 반각 공백 문자를 의미
  - 텍스트와 패턴의 대조 위치를 세로로 나란히 표시하기 위하여 IndexOfTester 21~30행에서는 '대조한 문자 바로 앞의 문자 수를 반각으로 환산한 값으로 구하는 것'
    - 이 for문에서는 substring을 사용하여 텍스트 문자열 안 각각의 문자에 주목하고 그 문자를 getBytes 메서드를 사용하여 바이트 배열로 변환
  - 프로그램을 실행하면 반각 문자는 1바이트의 배이트 배열로, 전각 문자는 2바이트의 바이트 배열로 변환
  - 따라서 바뀐 배열의 길이를 length 메서드로 구하면 검색 대상의 문자가 1바이트인지 2바이트인지 알 수 있다.
    - 이렇게 얻은 값을 for문으로 반복하여 누적하고, 그 누적한 값에 문자열 s2의 길이를 더한 것이 len1

<br>

### 조금만 더! 인코딩 방식에 따른 문자열 크기 계산
- 문자열 str = "ABC이지스123四五六"이 있다고 할 때 str.length()는 문자의 개수인 12를 반환
- 이와 달리 str.getBytes().length는 문자를 내부적으로 저장하는 배열의 크기, 곧 바이트 단위 크기를 반환
- 한글이나 한자는 인코딩 방식에 따라 'euc-kr'의 경우 문자 1개에 2바이트, 'utf-8'의 경우 3바이트의 크기를 갖는다.
- 다만 여기서 인코딩 방식은 자가바 내부적으로 저장하는 인코딩 방식을 의미
- 이런 혼동을 피하기 위해 str.getBytes("euc-kr").length 또는 str.getBytes("utf-8").length 처럼 바이트 단위 크기를 구할 때 인코딩 방식을 명시적으로 구별하는 것이 좋다.

<br>

---

<br>

정리한 내용에 대한 저작권은 "[do it! 자료구조와 함께 배우는 알고리즘 입문 자바편 개정](https://www.aladin.co.kr/search/wsearchresult.aspx?SearchTarget=All&SearchWord=Do+it%21+%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0%EC%99%80+%ED%95%A8%EA%BB%98+%EB%B0%B0%EC%9A%B0%EB%8A%94+%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98+%EC%9E%85%EB%AC%B8+%3A+%EC%9E%90%EB%B0%94+%ED%8E%B8)"에 있습니다.