# Chapter07 문자열 검색 - 02 KMP법
- KMP법은 일치하지 않는 문자를 만나면 패턴을 1칸 옮긴 다음, 패턴의 처음부터 다시 검사하는 브루트-포스법과는 달리 그때까지 검사한 결과를 효과적으로 이용하는 알고리즘

<br>

## KMP법 알아보기
- 텍스트 "ZABCABXACCADEF"에서 패턴 "ABCABD"를 검색하는 경우를 통해 KMP 알고리즘을 알아보겠다.
  - 텍스트, 패턴의 1번째 문자부터 순서대로 검사함
  - 텍스트의 1번째 문자 'Z'는 패턴에 없으므로 바로 일치하지 않는다고 판단
  - 패턴을 1칸 뒤로 옮긴 다음 패턴의 처음부터 순서대로 검사하면 패턴의 마지막 문자 'D'가 텍스트 'X'와 일치하지 않는다.
    - 여기서 텍스트 "ABCABX"에서 뒷 "AB"와 패턴 "ABCABD"에서 앞 "AB"가 일치하고 있는 것에 주목
    - 이부분을 '이미 검사를 마친 부분'으로 보면, 텍스트의 'x' 다음 문자부터 패턴의 "CABD"가 일치하는지만 검사하면 됨
    - 그래서 패턴을 "AB가 겹치도록 한번에(3칸) 이동시키고 3번째 문자인 'C'부터 검사하면 됨"
- 이와 같이 KMP법은 텍스트와 패턴 사이에 겹치는 부분을 찾아내 검사를 다시 시작할 위치를 구하여 패턴을 한 번에 많이 옮기는 알고리즘
- 하지만 패턴을 옮길 때마다 몇 번째 문자부터 다시 검색을 시작할지 계산해야 한다면 높은 효율을 기대할 수 없다.
- 그래서 '몇 번째 문자부터 다시 검색할지'에 대한 값을 미리 '표'로 만들어 이 문제를 해결
  - 표를 작성하려면 패턴 안에서 중복되는 문자열을 찾아야 한다. 이때도 KMP법의 아이디어를 이용
  - 패턴 안에서 중복되는 문자열을 찾기 위해 패턴 끼리 겹쳐 놓고 생각해 보겠다.
  - 텍스트와 패턴의 1번째 문자가 서로 다른 경우 패턴을 1칸 뒤로 옮기고 패턴의 1번째 문자부터 다시 검색해야 하는 것은 분명하므로 패턴의 2번째 문자부터 생각한다.
    - 패턴 "ABCABD"를 두 줄로 겹쳐 아랫줄을 1칸 뒤로 옮겨 표로 만든다.
    - 여기서 다음과 같은 사실을 알 수 있다.
      ```
      1. 패턴의 4번째 문자 'A'까지 일치하면 패턴을 텍스트의 다음 'A'까지 한 번에 옮긴 뒤
         'A'를 건너뛰고 2번째 문자부터 검사할 수 있다.
      2. 패턴의 4번째, 5번째 문자 'AB'까지 일치하면 패턴을 텍스트의 다음 'AB'까지 한 번에 옮긴 뒤
         'AB'를 건너뛰고 3번째 문자부터 검사할 수 있다.
      ```
- KMPmatch
  - kmpMatch 메서드가 전달받는 인수나 반환 값은 브루트-포스법의 함수 bfMatch와 같다.
  - KMP법에서 텍스트를 스캔하는 커서 pt는 앞으로 나아갈 뿐(전진) 뒤로 돌아오는 일(후퇴)은 없다.
  - 하지만 KMP법은 브루트-포스법보다는 복잡하고, 다음 절에서 공부할 보이어-무어법은 성능이 같거나 오히려 낮아 실세 프로그램에서는 별로 사용하지 않는다.

<br>

---

<br>

정리한 내용에 대한 저작권은 "[do it! 자료구조와 함께 배우는 알고리즘 입문 자바편 개정](https://www.aladin.co.kr/search/wsearchresult.aspx?SearchTarget=All&SearchWord=Do+it%21+%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0%EC%99%80+%ED%95%A8%EA%BB%98+%EB%B0%B0%EC%9A%B0%EB%8A%94+%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98+%EC%9E%85%EB%AC%B8+%3A+%EC%9E%90%EB%B0%94+%ED%8E%B8)"에 있습니다.