# Chapter06 정렬 알고리즘 - 5 셸 정렬
- 셸 정렬은 단순 삽입 정렬의 장점을 살리고 단점을 보완하여 좀 더 빠르게 정렬하는 알고리즘

<br>

## 단순 삽입 정렬의 특징 알아보기
- {1, 2, 3, 4, 5, 0, 6} 배열에서 단순 삽입 정렬을 수행한다고 가정
  - 2, 3, 4, 5 순서로 선택하여 정렬, 여기까지는 이미 정렬이 되어있는 상태이기 때문에 요소를 이동(값의 대입)하지 않음
  - 그러므로 5까지는 빨리 정렬할 수 있으나 0을 삽입하려면 총 6회에 걸쳐 이동(대입) 해야 함
  - 이 예는 다음과 같은 단순 삽입 정렬의 특징을 잘 보여줌
    ```
    [A] 정렬이 되었거나 또는 그 상태에 가까우면 정렬 속도가 아주 빠릅니다.(장점)
    [B] 삽입할 곳이 멀리 떨어지면 이동(대입)하는 횟수가 많습니다.(단점)
    ```

<br>

---

<br>

## 셸 정렬 알아보기
- 셸 정렬(Shell Sort)은 단순 삽입 정렬의 장점([A])을 살리고 단점([B])을 보완한 정렬 알고리즘으로, 도날드 셸(D.L Shell)이 고안
- 먼저 일정한 간격으로 서로 떨어져 있는 두 요소를 그룹으로 묶어 대략 정렬을 수행하고, 간격을 좁혀 그룹의 수를 줄이면서 정렬을 반복하여 요소의 이동 횟수를 줄이는 방법
- {8, 1, 4, 2, 7, 6, 3, 5}의 배열을 예로 들어 알고리즘을 살펴보겠다.
  - 먼저 4칸 떨어져 있는 요소를 모아 배열을 4개의 그룹({8, 7}, {1, 6}, {4, 3}, {2, 5})으로 나누고 각 그룹별로 정렬한다 -> {7, 1, 3, 2, 8, 6, 4, 5}
  - 이렇게 4칸 떨어진 요소를 하나의 그룹으로 묶어 정렬하는 방법을 '4-정렬'이라고 함
  - 아직 정렬을 마친 상태는 아니지만 정렬을 마친 상태와 가까워지고 있다.
  - '4-정렬'을 마친 상태에서 2칸 떨어진 요소를 모아 두 그룹({7, 3, 8, 4}, {1, 2, 6, 5})으로 나누어 '2-정렬' 함 -> {3, 1, 4, 2, 7, 5, 8, 6}
    - 이렇게 얻은 배열은 좀 더 정렬된 상태에 가까워 짐
  - 마지막으로 '1-정렬'을 적용하면 정렬을 마치게 됨 -> {1, 2, 3, 4, 5, 6, 7, 8}
- 셸 정렬 과정에서 수행하는 각각의 정렬을 'n-정렬'이라고 함
- {8, 1, 4, 2, 7, 6, 3, 5} 배열의 경우 h 값을 4, 2, 1로 감소시키면서 7회로 정렬을 마치게 됨
  ```
  - 2개 요소에 '4-정렬'을 적용합니다.(4개 그룹) ... 4회 ->
  - 4개 요소에 '2-정렬'을 적용합니다.(2개 그룹) ... 2회 -> (+) 7회
  - 8개 요소에 '1-정렬'을 적용합니다.(1개 그룹) ... 1회 ->
  ```
- 이렇게 여러 그룹으로 나누어 정렬하는 이유는 단순 삽입 정렬의 장점을 살리고, 단점을 보완하기 위해서
- 정렬해야 하는 횟수는 늦지만 전체적으로 요소의 이동 횟수가 줄어들어 효율적으로 정렬할 수 있다.

<br>

### 증분값(h값) 선택하기
- 앞에서 h값을 다음처럼 변화시켰다.
  - h = 4 -> 2 -> 1
  - h 값이 n에서 감소시켜 마지막에 1이 되면 됨
  - h값이 서로 배수가 되지 않도록 만들어야 함. 이렇게 하면 요소가 충분히 섞여 효율적으로 정렬할 수 있다.
- 다음 수열을 사용하면 셸 정렬 알고리즘을 간단히 만들 수 있을 뿐 아니라 효율적인 결과도 얻을 수 있다.
  - h = ... -> 121 -> 40 -> 13 -> 4 -> 1
  - 이 수열을 뒤에서부터 살펴보면 1부터 시작하여 3배한 값에 1을 더하는 수열이라는 것을 알 수 있음

<br>

- 셸 정렬의 시간 복잡도는 O(n^1.25)으로, 이는 기존의 시간 복잡도인 O(n^2)에 비해 매우 빠름
- 이 알고리즘은 멀리 떨어져 있는 요소를 교환하므로 안정적이지 않음

<br>

---

<br>

정리한 내용에 대한 저작권은 "[do it! 자료구조와 함께 배우는 알고리즘 입문 자바편 개정](https://www.aladin.co.kr/search/wsearchresult.aspx?SearchTarget=All&SearchWord=Do+it%21+%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0%EC%99%80+%ED%95%A8%EA%BB%98+%EB%B0%B0%EC%9A%B0%EB%8A%94+%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98+%EC%9E%85%EB%AC%B8+%3A+%EC%9E%90%EB%B0%94+%ED%8E%B8)"에 있습니다.